function init3DDial() {
    resizeDialBG();
    var mouseX, mouseY;
    document.addEventListener("mousemove", function(e) {
        mouseX = e.pageX, mouseY = e.pageY, bgTransX = mouseX / 30, bgTransY = mouseY / 30, rotY = 10*-(($(window).width() / 2 - mouseX) / ($(window).width() / 2)), rotX = ($(window).height() / 2 - mouseY) / ($(window).height() / 2) * 10, rotX =- rotX, rotY =- rotY, rotateScaleDial()
    })
}
function getDialScale() {
    var windowWidth = $(window).width(), windowHeight = window.innerHeight, scale = 1;
    dialMaxHeight >= windowWidth && dialMaxHeight >= windowHeight ? scale = windowHeight / (dialMaxHeight + 100) : dialMaxHeight >= windowWidth && windowHeight >= dialMaxHeight ? scale = windowWidth / (dialMaxHeight + 100) : windowWidth >= dialMaxHeight && dialMaxHeight >= windowHeight && (scale = windowHeight / (dialMaxHeight + 100)), navScale = " scale(" + scale + ")";
    var height = navContainer.height() * scale;
    transY = Math.floor((windowHeight - height) / 2)
}
function resizeDialBG() {
    var c = Math.ceil(Math.sqrt(window.innerHeight * window.innerHeight + window.innerWidth * window.innerWidth)), bg = document.querySelector(".rotating-bg");
    bg && (bg.style.width = c + "px", bg.style.height = c + "px", bg.style.top =- Math.ceil((c - window.innerHeight) / 2) + "px", bg.style.left =- Math.ceil((c - window.innerWidth) / 2) + "px")
}
function rotateScaleDial() {
    $(".navigation-menu-inner-circle").css({
        "background-position": - bgTransX + "px " +- bgTransY + "px"
    }), navContainer.css({
        transform: "rotateX(" + rotX + "deg) rotateY(" + rotY + "deg) " + navScale,
        MozTransform: "rotateX(" + rotX + "deg) rotateY(" + rotY + "deg) " + navScale,
        WebkitTransform: "rotateX(" + rotX + "deg) rotateY(" + rotY + "deg) " + navScale,
        msTransform: "rotateX(" + rotX + "deg) rotateY(" + rotY + "deg) " + navScale
    })
}
function rotateDialToSection(e) {
    e.preventDefault();
    for (var id = $(e.target).closest("div")[0].id.toLowerCase(), sections = ["timecapsule", "space", "transm"], i = 0; i < sections.length; i++)
        if (id.indexOf(sections[i])>-1) {
            if (i - curSection==-1 || i - curSection == 2)
                curDialDegrees += 120;
            else {
                if (i - curSection != 1 && i - curSection!=-2)
                    return;
                    curDialDegrees -= 120
            }
            curSection = i
        }
    navCenter.css({
        transform: "rotate(" + curDialDegrees + "deg)"
    }), showCenter(".nav-" + sections[curSection] + "-center")
}
function showCenter(classSelector) {
    var vis = $(".navigation-menu-inner-circle-borderLine:visible");
    if (!vis.hasClass(classSelector.replace(".", ""))) {
        var hid = $(classSelector);
        vis.addClass("opacity-0"), setTimeout(function() {
            hid.removeClass("display-none"), setTimeout(function() {
                hid.removeClass("opacity-0"), animateDialCenter(vis, !1), setTimeout(function() {
                    vis.addClass("display-none"), animateDialCenter(hid, !0)
                }, 500)
            }, 10)
        }, 10)
    }
}
function animateDialCenter(parent, show) {
    for (var delay = 300, classNames = ["icon", "text", "button"], i = 0; i < classNames.length; i++)
        timeoutDialCenter($(".navigation-center-content-" + classNames[i], parent), delay * i, show)
}
function timeoutDialCenter(el, delay, show) {
    setTimeout(function() {
        show ? el.addClass("show") : el.removeClass("show")
    }, delay)
}
function setDialTopPos() {
    window.innerHeight > dialMaxHeight ? navContainer.css("margin-top", .45 * window.innerHeight-337.75 + "px") : navContainer.css("margin-top", "25px")
}
function addZerosOnLeft(str, max) {
    return str = str.toString(), str.length < max ? addZerosOnLeft("0" + str, max) : str
}
function removeMenuButton() {
    "/ways-to-see" != window.location.pathname && $(".menu-button").remove()
}
function twitterShare(e) {
    return window.open(e.currentTarget.href, "newwin", "width=640, height=420,left=500,top=500"), !1
}
function googleShare(e) {
    return window.open(e.currentTarget.href, "newwin", "width=630, height=420,left=500,top=500"), !1
}
function facebookShare(e) {
    return window.open(e.currentTarget.href, "newwin", "width=640, height=420,left=500,top=500"), !1
}
var navScale, navContainer, rotX, rotY, bgTransX, bgTransY, transY, dialMaxHeight = 800;
$(document).ready(function() {
    Modernizr.touch || Detector.webgl || $("body").addClass("no-webgl"), navContainer = $(".navigation-center-container"), navCenter = $(".navigation-menu-circle"), getDialScale(), navContainer.css("transform", navScale), setDialTopPos(), $(window).resize(function() {
        getDialScale(), rotateScaleDial(), resizeDialBG(), setDialTopPos()
    }), navCenter.on("click", rotateDialToSection), $(".launch-transmissions-button").click(function() {
        ga("send", "event", "launchtransmissions", "launchtransmissions", "Comand Center"), setTimeout(function() {
            window.location.href = "transmissions"
        }, 300)
    }), "/spacehunt" == window.location.pathname || "/" == window.location.pathname ? sessionStorage.setItem("goBackToSpacehunt", !1) : null
});
var curDialDegrees = 0, curSection = 1;
$(document).ready(function() {
    $(".tickets-experience, .ways-to-see-btn").click(function() {
        intTrack.event("header_other", "header_waystoseeinterstellar", "Command Center"), setTimeout(function() {
            window.location.href = "/ways-to-see"
        }, 300)
    }), $(".googleShare").mouseover(function() {
        $(".googleShare").addClass("active")
    }).mouseout(function() {
        $(".googleShare").removeClass("active")
    }).click(function() {
        location.pathname.indexOf("transmissions")>-1 ? intTrack.event("trans_header_social", "trans_header_googleplus", "Transmissions") : location.pathname.indexOf("time-capsule") || intTrack.event("header_social", "header_googleplus", "Command Center")
    }), $(".facebookShare").mouseover(function() {
        $(".facebookShare").addClass("active")
    }).mouseout(function() {
        $(".facebookShare").removeClass("active")
    }).click(function() {
        location.pathname.indexOf("transmissions")>-1 ? intTrack.event("trans_header_social", "trans_header_facebook", "Transmissions") : location.pathname.indexOf("time-capsule") || intTrack.event("header_social", "header_facebook", "Command Center")
    }), $(".twitterShare").mouseover(function() {
        $(".twitterShare").addClass("active")
    }).mouseout(function() {
        $(".twitterShare").removeClass("active")
    }).click(function() {
        location.pathname.indexOf("transmissions")>-1 ? intTrack.event("trans_header_social", "trans_header_twitter", "Transmissions") : location.pathname.indexOf("time-capsule") || intTrack.event("header_social", "header_twitter", "Command Center")
    }), $(".header-link").mouseover(function() {
        $(".header-link").addClass("activeFilmsTickets")
    }).mouseout(function() {
        $(".header-link").removeClass("activeFilmsTickets")
    }).click(function() {
        window.location.href = ""
    })
}), $(document).ready(function() {
    function middleB() {
        $(".intro-date").addClass("move"), logo.delay(500).addClass("logoMoving").animate({
            opacity: 1
        }, 1e3, startHidingIntro)
    }
    function animateLogo() {
        intTrack.page("/spacehunt/intro", "Intro");
        var animationDuration = 3e3;
        setTimeout(function() {
            title.addClass("animation-complete")
        }, animationDuration)
    }
    function setCookie(cname, cvalue, exdays) {
        var d = new Date;
        d.setTime(d.getTime() + 24 * exdays * 60 * 60 * 1e3);
        var expires = "expires=" + d.toUTCString();
        document.cookie = cname + "=" + cvalue + "; " + expires
    }
    function getCookie(cname) {
        for (var name = cname + "=", ca = document.cookie.split(";"), i = 0; i < ca.length; i++) {
            for (var c = ca[i]; " " == c.charAt(0);)
                c = c.substring(1);
            if (0 == c.indexOf(name))
                return c.substring(name.length, c.length)
        }
        return ""
    }
    function preloadLogo(callback) {
        if (navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i))
            title.addClass("not-animating"), callback();
        else {
            var img = new Image;
            img.onload = function() {
                title.addClass("animating"), callback()
            }, img.src = "/static/images/intro/frames-s0788678d7e-shrink.png"
        }
    }
    function startHidingIntro() {
        setTimeout(function() {
            hideIntro()
        }, 2e3)
    }
    function loadDial() {
        Modernizr.touch || init3DDial()
    }
    function hideIntro() {
        setTimeout(function() {
            fadeIntoBG()
        }, 800), $(".intro-wrapper").animate({
            opacity: 0
        }, 1e3, function() {
            $(this).remove()
        }), back.removeClass("intro-container").addClass("intro-done"), text.animate({
            opacity: 0
        }, {
            duration: 100,
            queue: !1
        }), logo.animate({
            opacity: 0
        }, {
            duration: 100,
            queue: !1
        }), setCookie("intro_seen", "1", 120)
    }
    function fadeIntoBG() {
        $(window).width() <= 640 && "/" === window.location.pathname && (window.location = window.location.href + "menu"), back ? (back.animate({
            opacity: 0
        }, 100), setTimeout(function() {
            gotoNavigation()
        }, 80)) : gotoNavigation()
    }
    function gotoNavigation() {
        intTrack.page("/spacehunt/commandcenter", "Space Hunt Command Center"), $(".header-container").removeClass("hide"), navContainer.animate({
            opacity: 1
        }, 200), back.animate({
            opacity: 1
        }, 800), header.animate({
            opacity: 1
        }, 500), back.removeClass("intro-active"), setTimeout(function() {
            "true" === sessionStorage.getItem("goBackFromTransmissions") ? $("#transmitionsTitle").trigger("click") : $("#timeCapsuleTitle").trigger("click"), sessionStorage.setItem("goBackFromTimeCapsule", "false"), sessionStorage.setItem("goBackFromTransmissions", "false")
        }, 500), $("#spaceHuntTitle").circleType({
            radius: 280
        }), $("#transmitionsTitle").circleType({
            radius: 280
        }), $("#timeCapsuleTitle").circleType({
            radius: 280
        }), $(".launch-spacehunt-button").click(function() {
            intTrack.event("launchspacehunt", "launchspacehunt", "Comand Center"), setTimeout(function() {
                window.location.href = "spacehunt"
            }, 300)
        }), loadDial()
    }
    function showFooterInfo() {
        var link = $(".footer-legal-link"), icon = $(".footer-arrow-icon"), text = $(".footer-legal-descriptor"), legal = $(".footer-film-credits-legal");
        link.toggleClass("showing"), link.hasClass("showing") ? (text.text("close"), intTrack.event("footer_creditsandlegal", "credits_legal", "Command Center")) : setTimeout(function() {
            text.text("film credits & legal")
        }, 300), icon.toggleClass("down"), legal.toggleClass("showing"), $(document).on("click", function(event) {
            closeFooterInfo(event, link, icon, legal, text)
        })
    }
    function closeFooterInfo(event, link, icon, legal, text) {
        var target = event.target.offsetParent;
        $(target).is(".footer-container") || $(target).is(".footer-film-credits-legal") || $(target).is(".footer-fixed-wrapper") || $(event.target).is(".footer-link") || (link.removeClass("showing"), icon.removeClass("down"), legal.removeClass("showing"), setTimeout(function() {
            text.text("film credits & legal")
        }, 300), $(document).off("click", closeFooterInfo))
    }
    $(".google-play-logo").click(function() {
        intTrack.event("footer_gplayclickout", "footer_gplaystore", "Command Center")
    }), $(".landing-page-button").click(function() {
        intTrack.event("footer_gplayclickout", "footer_gplayapp", "Command Center")
    }), $(".terms-of-use").click(function() {
        intTrack.event("footer_creditsandlegal", "termsofuse", "Command Center")
    }), $(".footer-legal").click(function() {
        intTrack.event("footer_creditsandlegal", "legal", "Command Center")
    }), $(".privacy-policy").click(function() {
        intTrack.event("footer_creditsandlegal", "privacy policy", "Command Center")
    });
    var back = $("#back"), title = $("#title"), text = $("#text"), logo = $("#logo"), header = $("#header");
    $("#footer");
    document.querySelector(".intro-wrapper") && ("1" == getCookie("intro_seen") ? hideIntro() : Modernizr.sessionstorage && "1" == window.sessionStorage.introSeen ? hideIntro() : (back.animate({
        opacity: 1
    }, {
        duration: 3e3,
        queue: !1,
        ease: "swing"
    }), preloadLogo(function() {
        animateLogo(), middleB(), Modernizr.sessionstorage && (window.sessionStorage.introSeen = "1")
    })));
    var navContainer = $(".navigation-center-container");
    $(".footer-legal-link").click(function(e) {
        e.preventDefault(), showFooterInfo()
    })
}), $(function() {
    removeMenuButton()
}), function() {
    for (var lastTime = 0, vendors = ["ms", "moz", "webkit", "o"], x = 0; x < vendors.length&&!window.requestAnimationFrame; ++x)
        window.requestAnimationFrame = window[vendors[x] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[vendors[x] + "CancelAnimationFrame"] || window[vendors[x] + "CancelRequestAnimationFrame"];
    window.requestAnimationFrame || (window.requestAnimationFrame = function(callback, element) {
        var currTime = (new Date).getTime(), timeToCall = Math.max(0, 16 - (currTime - lastTime)), id = window.setTimeout(function() {
            callback(currTime + timeToCall)
        }, timeToCall);
        return lastTime = currTime + timeToCall, id
    }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function(id) {
        clearTimeout(id)
    })
}(), $(document).on("click", ".facebookShare", facebookShare), $(document).on("click", ".twitterShare", twitterShare), $(document).on("click", ".googleShare", googleShare), $(document).on("click", ".facebookShareCC", facebookShare), $(document).on("click", ".twitterShareCC", twitterShare), $(document).on("click", ".googleShareCC", googleShare);
//# sourceMappingURL=landing.map
